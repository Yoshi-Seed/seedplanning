<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>受注エコシステム（展開 + 詳細ポップアップ）</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- Cytoscape + Dagre layout (CDN) -->
  <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
  <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
  <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
</head>
<body>
  <div class="bg"></div>

  <div class="shell">
    <aside class="panel">
      <div class="panelTop">
        <div class="badge">Interactive</div>
        <h1>受注エコシステム</h1>
        <p class="sub">
          クリックで段階的に展開しつつ、各ノードの詳細はポップアップで確認できます。
          <span class="muted">（全体は薄く残して俯瞰）</span>
        </p>
      </div>

      <div class="controls">
        <button id="btnReset" class="btn ghost" type="button">リセット</button>
        <button id="btnShowAll" class="btn ghost" type="button">全て表示</button>
      </div>

      <div class="section">
        <div class="sectionTitle">選択中の経路</div>
        <div id="path" class="path"></div>
      </div>

      <div class="section">
        <div class="sectionTitle">ヒント</div>
        <ul class="tips">
          <li>ノードをクリックで展開 & 詳細表示</li>
          <li>空白をクリックで解除</li>
          <li>スクロールでズーム、ドラッグで移動</li>
        </ul>
      </div>

      <div class="foot">
        <span>静的HTMLのみ</span><span class="dot">•</span><span>GitHub Pages OK</span>
      </div>
    </aside>

    <main class="canvasWrap">
      <div class="topBar">
        <div class="topTitle">クリックで「ふわっ」と展開 + 詳細</div>
        <div class="topHint">End Client は常に表示 / 詳細は右下ポップアップで表示</div>
      </div>
      <div id="cy" class="cy"></div>

      <!-- Popup -->
      <div id="popupBackdrop" class="popupBackdrop" hidden></div>
      <section id="popup" class="popup" hidden role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <div class="popupTop">
          <div>
            <div id="popupKicker" class="popupKicker"></div>
            <h2 id="popupTitle" class="popupTitle"></h2>
          </div>
          <button id="popupClose" class="popupClose" type="button" aria-label="閉じる">×</button>
        </div>
        <div id="popupBody" class="popupBody"></div>
      </section>
    </main>
  </div>

  <script src="./data.js"></script>
  <script src="./app.js"></script>
</body>
</html>
