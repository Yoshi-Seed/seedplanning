<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>受注エコシステム（複数End + 分岐ルート）</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- Cytoscape + Dagre layout (CDN) -->
  <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
  <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
  <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
</head>
<body>
  <div class="bg"></div>

  <div class="shell">
    <aside class="panel">
      <div class="panelTop">
        <div class="badge">Prototype</div>
        <h1>受注エコシステム</h1>
        <p class="sub">
          <b>End を選択 → 一次が展開 → ルート分岐があれば選択</b>（例：HRWは「直→SEED」も「Holden経由」も両方）
          <span class="muted">全体は薄く残して俯瞰できます。</span>
        </p>
      </div>

      <div class="controls">
        <button id="btnReset" class="btn ghost" type="button">リセット</button>
        <button id="btnShowAll" class="btn ghost" type="button">全て表示</button>
        <button id="btnZoomOut" class="btn ghost" type="button">ズームアウト</button>
      </div>

      <div class="section">
        <div class="sectionTitle">選択中の経路</div>
        <div id="path" class="path"></div>
        <div id="routeHint" class="routeHint" hidden></div>
      </div>

      <div class="section">
        <div class="sectionTitle">ヒント</div>
        <ul class="tips">
          <li>まず End をクリック（複数End対応）</li>
          <li>一次をクリック → 二次 or 直→SEED が展開</li>
          <li>分岐がある場合は、SEED または二次をクリックして経路を確定</li>
          <li>空白クリックで解除</li>
        </ul>
      </div>

      <div class="foot">
        <span>静的HTMLのみ</span><span class="dot">•</span><span>GitHub Pages OK</span>
      </div>
    </aside>

    <main class="canvasWrap">
      <div class="topBar">
        <div class="topTitle">クリックで「ふわっ」と展開 + 詳細</div>
        <div class="topHint">ポップアップは社長向けに大きめ（Escで閉じる）</div>
      </div>
      <div id="cy" class="cy"></div>

      <!-- Popup -->
      <div id="popupBackdrop" class="popupBackdrop" hidden></div>
      <section id="popup" class="popup" hidden role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <div class="popupTop">
          <div>
            <div id="popupKicker" class="popupKicker"></div>
            <h2 id="popupTitle" class="popupTitle"></h2>
          </div>
          <button id="popupClose" class="popupClose" type="button" aria-label="閉じる">×</button>
        </div>
        <div id="popupBody" class="popupBody"></div>
      </section>
    </main>
  </div>

  <script src="./data.js"></script>
  <script src="./app.js"></script>
</body>
</html>
